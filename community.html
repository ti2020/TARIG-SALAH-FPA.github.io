<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Board | Tarig Salah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        * { font-family: 'Inter', sans-serif; }
        body { 
            background: #020617; 
            color: #f8fafc; 
            overflow: hidden;
            margin: 0;
        }
        .board-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
            overflow: hidden;
        }
        .moving-card {
            position: absolute;
            width: 300px;
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            cursor: grab;
            user-select: none;
            transition: opacity 0.3s ease, transform 0.3s ease, border-color 0.3s ease;
        }
        .moving-card.hidden { opacity: 0; pointer-events: none; }
        .moving-card.pinned { border-color: #fbbf24; box-shadow: 0 0 30px rgba(251, 191, 36, 0.3); }
        .moving-card.highlighted { border-color: #ec4899; box-shadow: 0 0 30px rgba(236, 72, 153, 0.3); }
        .moving-card:active { cursor: grabbing; }
        .heart-btn {
            color: #ef4444;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .heart-btn:hover { transform: scale(1.2); }
        .nav-fixed {
            position: fixed;
            top: 2rem;
            left: 2rem;
            right: 2rem;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .filter-panel {
            position: fixed;
            top: 8rem;
            left: 2rem;
            z-index: 99;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 1.5rem;
            width: 320px;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        .filter-section {
            margin-bottom: 1.5rem;
        }
        .filter-label {
            font-size: 0.75rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #3b82f6;
            margin-bottom: 0.75rem;
            display: block;
        }
        .search-input, .filter-select {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            color: white;
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }
        .search-input:focus, .filter-select:focus {
            outline: none;
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }
        .filter-btn {
            width: 100%;
            background: #3b82f6;
            color: white;
            padding: 0.75rem;
            border-radius: 0.75rem;
            font-weight: 900;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }
        .filter-btn:hover { background: #2563eb; transform: scale(1.02); }
        .clear-btn {
            width: 100%;
            background: transparent;
            color: #64748b;
            padding: 0.5rem;
            border-radius: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 0.75rem;
            transition: all 0.3s;
        }
        .clear-btn:hover { border-color: #3b82f6; color: #3b82f6; }
        .admin-panel {
            position: fixed;
            top: 8rem;
            right: 2rem;
            z-index: 99;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 1.5rem;
            width: 300px;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        .admin-title {
            font-size: 0.75rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #ec4899;
            margin-bottom: 1rem;
            display: block;
        }
        .admin-btn {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.75rem;
            font-weight: 900;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            cursor: pointer;
            border: none;
            margin-bottom: 0.5rem;
            transition: all 0.3s;
        }
        .delete-btn { background: #ef4444; color: white; }
        .delete-btn:hover { background: #dc2626; }
        .pin-btn { background: #fbbf24; color: #000; }
        .pin-btn:hover { background: #f59e0b; }
        .highlight-btn { background: #ec4899; color: white; }
        .highlight-btn:hover { background: #db2777; }
        .details-btn { background: #3b82f6; color: white; }
        .details-btn:hover { background: #2563eb; }
        .form-overlay {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 100;
        }
        .glass-btn {
            background: rgba(59, 130, 246, 0.8);
            backdrop-filter: blur(8px);
            padding: 1rem 2rem;
            border-radius: 9999px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 0.75rem;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        .glass-btn:hover {
            background: #3b82f6;
            transform: scale(1.05);
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: #0f172a;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 2rem;
            padding: 2.5rem;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        input, textarea, select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            width: 100%;
            color: white;
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
        }
        .results-count {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            padding: 0.75rem 1.5rem;
            font-size: 0.75rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #3b82f6;
        }
        .details-modal {
            background: #0f172a;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 2rem;
            padding: 2.5rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .flag-icon {
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.3);
            border-radius: 3px;
        }
    </style>
</head>
<body>

    <nav class="nav-fixed">
        <div class="flex flex-col">
            <span class="text-xl font-black tracking-tighter uppercase">Tarig Salah</span>
            <span class="text-[8px] font-bold tracking-[0.5em] text-blue-500 uppercase">Community Board</span>
        </div>
        <div class="flex gap-4 items-center">
            <a href="index.html" class="text-[10px] font-bold uppercase tracking-widest hover:text-blue-400 transition">Terminal</a>
            <a href="portfolio.html" class="text-[10px] font-bold uppercase tracking-widest hover:text-blue-400 transition">Vault</a>
            <a href="https://t.me/AZRG_97" target="_blank" class="bg-blue-600 text-white px-4 py-2 rounded-full text-[9px] font-bold uppercase tracking-widest flex items-center gap-2">
                <span class="w-1.5 h-1.5 bg-white rounded-full animate-ping"></span>Telegram
            </a>
        </div>
    </nav>

    <!-- Filter Panel -->
    <div class="filter-panel">
        <h3 class="text-sm font-black uppercase tracking-tighter mb-4 text-white">Search & Filter</h3>
        
        <div class="filter-section">
            <label class="filter-label">Search by Name</label>
            <input type="text" id="searchName" class="search-input" placeholder="Enter name...">
        </div>

        <div class="filter-section">
            <label class="filter-label">Filter by Country</label>
            <select id="filterCountry" class="filter-select">
                <option value="">All Countries</option>
            </select>
        </div>

        <div class="filter-section">
            <label class="filter-label">Filter by Position</label>
            <select id="filterPosition" class="filter-select">
                <option value="">All Positions</option>
            </select>
        </div>

        <div class="filter-section">
            <label class="filter-label">Sort by Date</label>
            <select id="sortDate" class="filter-select">
                <option value="newest">Newest First</option>
                <option value="oldest">Oldest First</option>
            </select>
        </div>

        <button onclick="applyFilters()" class="filter-btn">Apply Filters</button>
        <button onclick="clearFilters()" class="clear-btn">Clear All</button>
    </div>

    <!-- Admin Control Panel -->
    <div class="admin-panel">
        <label class="admin-title">Admin Controls</label>
        <p class="text-[9px] text-slate-400 mb-4">Select a post to manage</p>
        <div id="adminControls" style="display: none;">
            <button onclick="deleteSelectedPost()" class="admin-btn delete-btn">Delete Post</button>
            <button onclick="pinSelectedPost()" class="admin-btn pin-btn">Pin Post</button>
            <button onclick="highlightSelectedPost()" class="admin-btn highlight-btn">Highlight Post</button>
            <button onclick="viewPostDetails()" class="admin-btn details-btn">View Details</button>
            <button onclick="clearSelection()" class="admin-btn" style="background: #64748b;">Clear Selection</button>
        </div>
        <div id="noSelection" style="text-align: center;">
            <p class="text-[10px] text-slate-500 font-bold uppercase">No post selected</p>
            <p class="text-[8px] text-slate-600 mt-2">Click on a card to select it</p>
        </div>
    </div>

    <div class="board-container" id="board">
        <!-- Cards will be injected here -->
    </div>

    <div class="results-count" id="resultsCount">Showing 0 posts</div>

    <div class="form-overlay">
        <button onclick="openModal()" class="glass-btn">Post to Board</button>
    </div>

    <!-- Post Modal -->
    <div id="postModal" class="modal">
        <div class="modal-content">
            <h2 class="text-2xl font-black uppercase mb-6 tracking-tighter">New Community Post</h2>
            <form id="postForm" onsubmit="handlePost(event)">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="name" placeholder="Full Name" required>
                    <input type="text" id="position" placeholder="Position" required>
                </div>
                <input type="email" id="email" placeholder="Email Address" required>
                <div class="grid grid-cols-2 gap-4">
                    <select id="country" required>
                        <option value="">Select Country</option>
                    </select>
                    <input type="url" id="linkedin" placeholder="LinkedIn Profile URL" required>
                </div>
                <input type="url" id="photo" placeholder="Photo URL (or LinkedIn Photo URL)">
                <textarea id="message" placeholder="Your Message (Max 500 characters)" maxlength="500" rows="4" required></textarea>
                <button type="submit" class="w-full bg-blue-600 py-3 rounded-xl font-black uppercase tracking-widest text-sm hover:bg-blue-500 transition">Publish Post</button>
                <button type="button" onclick="closeModal()" class="w-full mt-3 text-slate-500 text-[10px] font-bold uppercase tracking-widest">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Details Modal -->
    <div id="detailsModal" class="modal">
        <div class="details-modal">
            <h2 class="text-2xl font-black uppercase mb-6 tracking-tighter">Post Details</h2>
            <div id="detailsContent"></div>
            <button onclick="closeDetailsModal()" class="w-full mt-6 bg-blue-600 py-3 rounded-xl font-black uppercase tracking-widest text-sm hover:bg-blue-500 transition">Close</button>
        </div>
    </div>

    <script>
        // Country data with flags
        const countryFlags = {
            'Saudi Arabia': 'üá∏üá¶',
            'Egypt': 'üá™üá¨',
            'Sudan': 'üá∏üá©',
            'UAE': 'üá¶üá™',
            'Kuwait': 'üá∞üáº',
            'Qatar': 'üá∂üá¶',
            'Bahrain': 'üáßüá≠',
            'Oman': 'üá¥üá≤',
            'Jordan': 'üáØüá¥',
            'Lebanon': 'üá±üáß',
            'Pakistan': 'üáµüá∞',
            'India': 'üáÆüá≥',
            'USA': 'üá∫üá∏',
            'UK': 'üá¨üáß',
            'Canada': 'üá®üá¶',
            'Australia': 'üá¶üá∫',
            'Germany': 'üá©üá™',
            'France': 'üá´üá∑',
            'Singapore': 'üá∏üá¨',
            'Malaysia': 'üá≤üáæ'
        };

        const board = document.getElementById('board');
        let allPosts = [
            {
                name: "Sample Colleague",
                position: "Senior Analyst",
                country: "Saudi Arabia",
                message: "Great work on the DCF models! The strategic alignment with Vision 2030 is impressive.",
                likes: 12,
                date: "2026-01-22",
                photo: "https://ui-avatars.com/api/?name=Sample+Colleague&background=3b82f6&color=fff",
                pinned: false,
                highlighted: false
            }
        ];

        let selectedPostIndex = null;

        function createCard(post, index) {
            const card = document.createElement('div');
            card.className = 'moving-card';
            if (post.pinned) card.classList.add('pinned');
            if (post.highlighted) card.classList.add('highlighted');
            card.setAttribute('data-index', index);
            card.setAttribute('data-country', post.country);
            card.setAttribute('data-position', post.position);
            card.setAttribute('data-date', post.date);
            card.setAttribute('data-name', post.name.toLowerCase());
            
            const flag = countryFlags[post.country] || 'üåç';
            
            card.innerHTML = `
                <div class="flex items-center gap-4 mb-4">
                    <img src="${post.photo || 'https://ui-avatars.com/api/?name=' + post.name}" class="w-12 h-12 rounded-full border border-blue-500/30 object-cover">
                    <div>
                        <h3 class="font-black text-sm uppercase tracking-tight">${post.name}</h3>
                        <p class="text-[9px] text-blue-400 font-bold uppercase tracking-widest">${post.position}</p>
                    </div>
                </div>
                <p class="text-xs text-slate-300 leading-relaxed mb-4 italic">"${post.message}"</p>
                <div class="flex justify-between items-center border-t border-white/10 pt-3">
                    <div class="flex flex-col">
                        <span class="text-[8px] text-slate-500 font-bold uppercase"><span class="flag-icon">${flag}</span>${post.country}</span>
                        <span class="text-[8px] text-slate-600 font-bold uppercase">${post.date}</span>
                    </div>
                    <div class="flex items-center gap-2" onclick="likePost(this)">
                        <span class="heart-btn">‚ù§</span>
                        <span class="text-[10px] font-black text-slate-400">${post.likes}</span>
                    </div>
                </div>
            `;
            
            // Random initial position
            const x = Math.random() * (window.innerWidth - 300);
            const y = Math.random() * (window.innerHeight - 200);
            card.style.left = x + 'px';
            card.style.top = y + 'px';
            
            card.addEventListener('click', () => selectPost(index, card));
            
            board.appendChild(card);
            animateCard(card);
        }

        function animateCard(card) {
            const duration = 20 + Math.random() * 20;
            gsap.to(card, {
                x: "random(-100, 100)",
                y: "random(-100, 100)",
                rotation: "random(-5, 5)",
                duration: duration,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
        }

        function selectPost(index, card) {
            document.querySelectorAll('.moving-card').forEach(c => c.style.opacity = '0.5');
            card.style.opacity = '1';
            selectedPostIndex = index;
            document.getElementById('adminControls').style.display = 'block';
            document.getElementById('noSelection').style.display = 'none';
        }

        function clearSelection() {
            document.querySelectorAll('.moving-card').forEach(c => c.style.opacity = '1');
            selectedPostIndex = null;
            document.getElementById('adminControls').style.display = 'none';
            document.getElementById('noSelection').style.display = 'block';
        }

        function deleteSelectedPost() {
            if (selectedPostIndex !== null) {
                allPosts.splice(selectedPostIndex, 1);
                location.reload();
            }
        }

        function pinSelectedPost() {
            if (selectedPostIndex !== null) {
                allPosts[selectedPostIndex].pinned = !allPosts[selectedPostIndex].pinned;
                const card = document.querySelector(`[data-index="${selectedPostIndex}"]`);
                card.classList.toggle('pinned');
            }
        }

        function highlightSelectedPost() {
            if (selectedPostIndex !== null) {
                allPosts[selectedPostIndex].highlighted = !allPosts[selectedPostIndex].highlighted;
                const card = document.querySelector(`[data-index="${selectedPostIndex}"]`);
                card.classList.toggle('highlighted');
            }
        }

        function viewPostDetails() {
            if (selectedPostIndex !== null) {
                const post = allPosts[selectedPostIndex];
                const flag = countryFlags[post.country] || 'üåç';
                const detailsContent = document.getElementById('detailsContent');
                detailsContent.innerHTML = `
                    <div class="space-y-4">
                        <div class="flex items-center gap-4">
                            <img src="${post.photo || 'https://ui-avatars.com/api/?name=' + post.name}" class="w-20 h-20 rounded-full border border-blue-500/30 object-cover">
                            <div>
                                <h3 class="text-xl font-black uppercase">${post.name}</h3>
                                <p class="text-blue-400 font-bold">${post.position}</p>
                            </div>
                        </div>
                        <div class="bg-slate-900/50 p-4 rounded-xl">
                            <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Contact Information</p>
                            <p class="text-sm mb-2"><strong>Email:</strong> ${post.email}</p>
                            <p class="text-sm mb-2"><strong>Country:</strong> <span class="flag-icon">${flag}</span>${post.country}</p>
                            <p class="text-sm"><strong>LinkedIn:</strong> <a href="${post.linkedin}" target="_blank" class="text-blue-400 hover:underline">View Profile</a></p>
                        </div>
                        <div class="bg-slate-900/50 p-4 rounded-xl">
                            <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Message</p>
                            <p class="text-sm italic">"${post.message}"</p>
                        </div>
                        <div class="bg-slate-900/50 p-4 rounded-xl">
                            <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Engagement</p>
                            <p class="text-sm">‚ù§ ${post.likes} Likes</p>
                            <p class="text-sm">üìÖ Posted: ${post.date}</p>
                        </div>
                    </div>
                `;
                document.getElementById('detailsModal').classList.add('active');
            }
        }

        function closeDetailsModal() {
            document.getElementById('detailsModal').classList.remove('active');
        }

        function likePost(el) {
            const countEl = el.querySelector('span:last-child');
            let count = parseInt(countEl.innerText);
            countEl.innerText = count + 1;
            gsap.from(el.querySelector('.heart-btn'), { scale: 1.5, duration: 0.3 });
        }

        function populateCountries() {
            const countrySelect = document.getElementById('country');
            const filterCountry = document.getElementById('filterCountry');
            
            Object.keys(countryFlags).forEach(country => {
                const option1 = document.createElement('option');
                option1.value = country;
                option1.textContent = countryFlags[country] + ' ' + country;
                countrySelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = country;
                option2.textContent = country;
                filterCountry.appendChild(option2);
            });
        }

        function populateFilters() {
            const positions = new Set(allPosts.map(p => p.position));
            const positionSelect = document.getElementById('filterPosition');

            positions.forEach(position => {
                const option = document.createElement('option');
                option.value = position;
                option.textContent = position;
                positionSelect.appendChild(option);
            });
        }

        function applyFilters() {
            const searchName = document.getElementById('searchName').value.toLowerCase();
            const filterCountry = document.getElementById('filterCountry').value;
            const filterPosition = document.getElementById('filterPosition').value;
            const sortDate = document.getElementById('sortDate').value;

            const cards = document.querySelectorAll('.moving-card');
            let visibleCount = 0;

            cards.forEach(card => {
                const name = card.getAttribute('data-name');
                const country = card.getAttribute('data-country');
                const position = card.getAttribute('data-position');

                let show = true;

                if (searchName && !name.includes(searchName)) show = false;
                if (filterCountry && country !== filterCountry) show = false;
                if (filterPosition && position !== filterPosition) show = false;

                if (show) {
                    card.classList.remove('hidden');
                    visibleCount++;
                } else {
                    card.classList.add('hidden');
                }
            });

            if (sortDate === 'oldest') {
                cards.forEach(card => {
                    if (!card.classList.contains('hidden')) {
                        card.style.zIndex = new Date(card.getAttribute('data-date')).getTime();
                    }
                });
            } else {
                cards.forEach(card => {
                    if (!card.classList.contains('hidden')) {
                        card.style.zIndex = -new Date(card.getAttribute('data-date')).getTime();
                    }
                });
            }

            document.getElementById('resultsCount').textContent = `Showing ${visibleCount} post${visibleCount !== 1 ? 's' : ''}`;
        }

        function clearFilters() {
            document.getElementById('searchName').value = '';
            document.getElementById('filterCountry').value = '';
            document.getElementById('filterPosition').value = '';
            document.getElementById('sortDate').value = 'newest';

            document.querySelectorAll('.moving-card').forEach(card => {
                card.classList.remove('hidden');
            });

            document.getElementById('resultsCount').textContent = `Showing ${allPosts.length} post${allPosts.length !== 1 ? 's' : ''}`;
        }

        function openModal() { document.getElementById('postModal').classList.add('active'); }
        function closeModal() { document.getElementById('postModal').classList.remove('active'); }

        function handlePost(e) {
            e.preventDefault();
            const newPost = {
                name: document.getElementById('name').value,
                position: document.getElementById('position').value,
                email: document.getElementById('email').value,
                country: document.getElementById('country').value,
                linkedin: document.getElementById('linkedin').value,
                photo: document.getElementById('photo').value,
                message: document.getElementById('message').value,
                likes: 0,
                date: new Date().toISOString().split('T')[0],
                pinned: false,
                highlighted: false
            };
            allPosts.push(newPost);
            createCard(newPost, allPosts.length - 1);
            populateFilters();
            closeModal();
            e.target.reset();
            document.getElementById('resultsCount').textContent = `Showing ${allPosts.length} post${allPosts.length !== 1 ? 's' : ''}`;
        }

        // Initialize
        populateCountries();
        allPosts.forEach((post, index) => createCard(post, index));
        populateFilters();
        document.getElementById('resultsCount').textContent = `Showing ${allPosts.length} post${allPosts.length !== 1 ? 's' : ''}`;
    </script>
</body>
</html>
